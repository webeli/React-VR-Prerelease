<!DOCTYPE html><html><head><title>Animations</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><meta property="fb:app_id" content="1677033832619985"><meta property="fb:admins" content="121800083"><meta property="og:site_name" content="React Native"><meta property="og:title" content="Animations"><meta property="og:url" content="https://facebook.github.io/react-vr/index.html"><meta property="og:image" content="https://facebook.github.io/react-native/img/opengraph.png"><meta property="og:description" content="A framework for building native apps using React"><meta name="twitter:site" content="@reactnative"><meta name="twitter:card" content="summary_large_image"><meta property="og:type" content="website"><base href="../"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="shortcut icon" href="img/favicon.png?2"><link rel="stylesheet" href="css/react-native.css"><link rel="alternate" type="application/rss+xml" title="React Native Blog" href="https://facebook.github.io/react-vr/blog/feed.xml"><link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="https://use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><script>window.fbAsyncInit = function() {FB.init({appId:'1677033832619985',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = 'https://connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));</script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, "script", "twitter-wjs"));</script><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="./index.html"><img src="img/header_logo.png">React VR</a><div class="nav-site-wrapper"><ul class="nav-site nav-site-internal"><li><a href="docs/getting-started.html" class="active" data-target=".nav-docs">Docs</a></li></ul><ul class="nav-site nav-site-external"><li><a href="https://github.com/facebookincubator/react-vr" class="">GitHub</a></li><li><a href="http://facebook.github.io/react" class="">React</a></li><li><a href="http://facebook.github.io/react-native" class="">React Native</a></li></ul></div></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-viewport"><div class="nav-docs-section"><h3>The Basics</h3><ul><li><a style="margin-left:0;" class="" href="docs/getting-started.html">Getting Started</a></li><li><a style="margin-left:0;" class="" href="docs/tutorial.html">Hello World</a></li><li><a style="margin-left:0;" class="" href="docs/project-configuration.html">Project Configuration</a></li><li><a style="margin-left:0;" class="" href="docs/publishing.html">Publishing Your Project</a></li><li><a style="margin-left:0;" class="" href="docs/react-vroverview.html">React VR Overview</a></li><li><a style="margin-left:0;" class="" href="docs/components-props-and-state.html">Components, Props and State</a></li><li><a style="margin-left:0;" class="" href="docs/layout-and-style.html">Layout and Style</a></li><li><a style="margin-left:0;" class="" href="docs/3dcoordinates-and-transforms.html">3D Coordinates and Transforms</a></li><li><a style="margin-left:0;" class="" href="docs/input.html">Handling Input</a></li><li><a style="margin-left:0;" class="" href="docs/fonts.html">Fonts and Text</a></li><li><a style="margin-left:0;" class="" href="docs/vrbrowsers.html">VR Browsers</a></li><li><a style="margin-left:0;" class="" href="docs/dev-tools.html">Dev Tools</a></li></ul></div><div class="nav-docs-section"><h3>Guides</h3><ul><li><a style="margin-left:0;" class="active" href="docs/animations.html">Animations</a></li><li><a style="margin-left:0;" class="" href="docs/colors.html">Colors</a></li><li><a style="margin-left:0;" class="" href="docs/debugging.html">Debugging</a></li><li><a style="margin-left:0;" class="" href="docs/images.html">Images</a></li><li><a style="margin-left:0;" class="" href="docs/timers.html">Timers</a></li><li><a style="margin-left:0;" class="" href="docs/native-modules.html">Native Modules</a></li><li><a style="margin-left:0;" class="" href="docs/platform-specific-information.html">Platform Specific Code</a></li><li><a style="margin-left:0;" class="" href="docs/samples.html">Samples</a></li></ul></div><div class="nav-docs-section"><h3>core components</h3><ul><li><a style="margin-left:0;" class="" href="docs/view.html">View</a></li><li><a style="margin-left:0;" class="" href="docs/image.html">Image</a></li><li><a style="margin-left:0;" class="" href="docs/text.html">Text</a></li></ul></div><div class="nav-docs-section"><h3>react vr components</h3><ul><li><a style="margin-left:0;" class="" href="docs/mesh.html">Mesh</a></li><li><a style="margin-left:0;" class="" href="docs/pano.html">Pano</a></li><li><a style="margin-left:0;" class="" href="docs/scene.html">Scene</a></li><li><a style="margin-left:0;" class="" href="docs/ambientlight.html">AmbientLight</a></li><li><a style="margin-left:0;" class="" href="docs/directionallight.html">DirectionalLight</a></li><li><a style="margin-left:0;" class="" href="docs/pointlight.html">PointLight</a></li><li><a style="margin-left:0;" class="" href="docs/spotlight.html">SpotLight</a></li><li><a style="margin-left:0;" class="" href="docs/vrbutton.html">VrButton</a></li></ul></div><div class="nav-docs-section"><h3>apis</h3><ul><li><a style="margin-left:0;" class="" href="docs/animated.html">Animated</a></li><li><a style="margin-left:0;" class="" href="docs/appregistry.html">AppRegistry</a></li><li><a style="margin-left:0;" class="" href="docs/appstate.html">AppState</a></li><li><a style="margin-left:0;" class="" href="docs/asyncstorage.html">AsyncStorage</a></li><li><a style="margin-left:0;" class="" href="docs/easing.html">Easing</a></li><li><a style="margin-left:0;" class="" href="docs/linking.html">Linking</a></li><li><a style="margin-left:0;" class="" href="docs/stylesheet.html">StyleSheet</a></li><li><a style="margin-left:0;" class="" href="docs/nativemethodsmixin.html">NativeMethodsMixin</a></li><li><a style="margin-left:0;" class="" href="docs/layout-props.html">Layout Props</a></li><li><a style="margin-left:0;" class="" href="docs/layout-and-transform-props.html">Layout And Transform Props</a></li></ul></div></div></div><div class="inner-content"><a id="content"></a><h1><a class="anchor" name="animations"></a>Animations <a class="hash-link" href="docs/animations.html#animations">#</a></h1><div><p>Fluid, meaningful animations are essential to the WebVR user experience.</p><h3><a class="anchor" name="animated"></a>Animated <a class="hash-link" href="docs/animations.html#animated">#</a></h3><p>The <code>Animated</code> library is designed to make it easy to concisely express a
wide variety of interesting animation and interaction patterns while providing
efficient performance. <code>Animated</code> focuses on declarative relationships between
inputs and outputs, with configurable transforms in between, and simple
<code>start</code>/<code>stop</code> methods to control time-based animation execution.</p><p>For example, a complete component with a simple spring bounce on mount looks
like this:</p><div class="prism language-javascript">class <span class="token class-name">Playground</span> extends <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor<span class="token punctuation">(</span></span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">super<span class="token punctuation">(</span></span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      bounceValue<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Animated<span class="token punctuation">.</span>Value</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      &lt;Animated<span class="token punctuation">.</span>Image                        <span class="token comment" spellcheck="true"> // Base: Image, Text, View
</span>        source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>uri<span class="token punctuation">:</span> <span class="token string">&#x27;http://i.imgur.com/XMKOH81.jpg&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          transform<span class="token punctuation">:</span> <span class="token punctuation">[</span>                       <span class="token comment" spellcheck="true"> // `transform` is an ordered array
</span>            <span class="token punctuation">{</span>scale<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>bounceValue<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true"> // Map `bounceValue` to `scale`
</span>          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>bounceValue<span class="token punctuation">.</span><span class="token function">setValue<span class="token punctuation">(</span></span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true"> // Start large
</span>    Animated<span class="token punctuation">.</span><span class="token function">spring<span class="token punctuation">(</span></span>                         <span class="token comment" spellcheck="true"> // Base: spring, decay, timing
</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>bounceValue<span class="token punctuation">,</span>                <span class="token comment" spellcheck="true"> // Animate `bounceValue`
</span>      <span class="token punctuation">{</span>
        toValue<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>                        <span class="token comment" spellcheck="true"> // Animate to smaller size
</span>        friction<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                         <span class="token comment" spellcheck="true"> // Bouncier spring
</span>      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>                               <span class="token comment" spellcheck="true"> // Start the animation
</span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></div><p><code>bounceValue</code> is initialized as part of <code>state</code> in the constructor, and mapped
to the scale transform on the image.  Behind the scenes, the numeric value is
extracted and used to set scale.  When the component mounts, the scale is set to
1.5 and then a spring animation is started on <code>bounceValue</code> which will update
all of its dependent mappings on each frame as the spring animates (in this
case, just the scale). This is done in an optimized way that is faster than
calling <code>setState</code> and re-rendering.  Because the entire configuration is
declarative, we can implement further optimizations that serialize the
configuration and run the animation on a high-priority thread.</p><h4><a class="anchor" name="core-api"></a>Core API <a class="hash-link" href="docs/animations.html#core-api">#</a></h4><p>Most everything you need hangs directly off the <code>Animated</code> module.  This
includes two value types, <code>Value</code> for single values and <code>ValueXY</code> for vectors,
three animation types, <code>spring</code>, <code>decay</code>, and <code>timing</code>, and three component
types, <code>View</code>, <code>Text</code>, and <code>Image</code>.  You can make any other component animated with
<code>Animated.createAnimatedComponent</code>.</p><p>The three animation types can be used to create almost any animation curve you
want because each can be customized:</p><ul><li><code>spring</code>: Simple single-spring physics model that matches <a href="https://facebook.github.io/origami/" target="_blank">Origami</a>.<ul><li><code>friction</code>: Controls &quot;bounciness&quot;/overshoot.  Default 7.</li><li><code>tension</code>: Controls speed.  Default 40.</li></ul></li><li><code>decay</code>: Starts with an initial velocity and gradually slows to a stop.<ul><li><code>velocity</code>: Initial velocity.  Required.</li><li><code>deceleration</code>: Rate of decay.  Default 0.997.</li></ul></li><li><code>timing</code>: Maps time range to easing value.<ul><li><code>duration</code>: Length of animation (milliseconds).  Default 500.</li><li><code>easing</code>: Easing function to define curve.  See <code>Easing</code> module for several
predefined functions.  iOS default is <code>Easing.inOut(Easing.ease)</code>.</li><li><code>delay</code>: Start the animation after delay (milliseconds).  Default 0.</li></ul></li></ul><p>Animations are started by calling <code>start</code>.  <code>start</code> takes a completion callback
that is called when the animation is done.  If the animation is done
because it finished running normally, the completion callback is invoked
with <code>{finished: true}</code>. But, if the animation is done because <code>stop</code> was called
on it before it could finish (for example, because it was interrupted by a
gesture or another animation), then it receives <code>{finished: false}</code>.</p><h4><a class="anchor" name="composing-animations"></a>Composing Animations <a class="hash-link" href="docs/animations.html#composing-animations">#</a></h4><p>Animations can also be composed with <code>parallel</code>, <code>sequence</code>, <code>stagger</code>, and
<code>delay</code>. Each simply takes an array of animations to execute as input and
automatically calls start/stop as appropriate.  For example:</p><div class="prism language-javascript">Animated<span class="token punctuation">.</span><span class="token function">sequence<span class="token punctuation">(</span></span><span class="token punctuation">[</span>           <span class="token comment" spellcheck="true"> // spring to start and twirl after decay finishes
</span>  Animated<span class="token punctuation">.</span><span class="token function">decay<span class="token punctuation">(</span></span>position<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true"> // coast to a stop
</span>    velocity<span class="token punctuation">:</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> gestureState<span class="token punctuation">.</span>vx<span class="token punctuation">,</span> y<span class="token punctuation">:</span> gestureState<span class="token punctuation">.</span>vy<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true"> // velocity from gesture release
</span>    deceleration<span class="token punctuation">:</span> <span class="token number">0.997</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Animated<span class="token punctuation">.</span><span class="token function">parallel<span class="token punctuation">(</span></span><span class="token punctuation">[</span>         <span class="token comment" spellcheck="true"> // after decay, in parallel:
</span>    Animated<span class="token punctuation">.</span><span class="token function">spring<span class="token punctuation">(</span></span>position<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      toValue<span class="token punctuation">:</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>   <span class="token comment" spellcheck="true"> // return to start
</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Animated<span class="token punctuation">.</span><span class="token function">timing<span class="token punctuation">(</span></span>twirl<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true"> // and twirl
</span>      toValue<span class="token punctuation">:</span> <span class="token number">360</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true"> // start the sequence group</span></div><p>If one animation is stopped or interrupted, the default behavior is to stop all
other animations in the group. Parallel has a <code>stopTogether</code> option
that can be set to <code>false</code> to change this behavior.</p><h4><a class="anchor" name="interpolation"></a>Interpolation <a class="hash-link" href="docs/animations.html#interpolation">#</a></h4><p>Another powerful part of the <code>Animated</code> API is the <code>interpolate</code> function.  It
allows input ranges to map to different output ranges.  For example, here is a
simple mapping to convert a 0-1 range to a 0-100 range:</p><div class="prism language-javascript">value<span class="token punctuation">.</span><span class="token function">interpolate<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
  inputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  outputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><p><code>interpolate</code> supports multiple range segments as well, which is handy for
defining dead zones and other handy tricks.  For example, to get a negation
relationship at -300 that goes to 0 at -100, then back up to 1 at 0, and then
back down to zero at 100 followed by a dead-zone that remains at 0 for
everything beyond that, you could do:</p><div class="prism language-javascript">value<span class="token punctuation">.</span><span class="token function">interpolate<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
  inputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  outputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">300</span><span class="token punctuation">,</span>    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><p>Which would map like so:</p><table><thead><tr><th>Input</th><th>Output</th></tr></thead><thead><tr><td>  -400</td><td>450</td></tr><tr><td>  -300</td><td>300</td></tr><tr><td>  -200</td><td>150</td></tr><tr><td>  -100</td><td>0</td></tr><tr><td>   -50</td><td>0.5</td></tr><tr><td>     0</td><td>1</td></tr><tr><td>    50</td><td>0.5</td></tr><tr><td>   100</td><td>0</td></tr><tr><td>   101</td><td>0</td></tr><tr><td>   200</td><td>0</td></tr></thead></table><p><code>interpolate</code> also supports mapping to strings, allowing you to animate colors as well as values with units. For example, if you wanted to animate a rotation you could do:</p><div class="prism language-javascript">value<span class="token punctuation">.</span><span class="token function">interpolate<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
  inputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  outputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;0deg&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;360deg&#x27;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></div><p><code>interpolation</code> also supports arbitrary easing functions, many of which are
already implemented in the
<a href="https://github.com/facebook/react-vr/blob/master/Libraries/Animation/Animated/Easing.js" target="_blank"><code>Easing</code></a>
class, including quadratic, exponential, and bezier curves as well as functions
such as <code>step</code> and <code>bounce</code>. <code>interpolation</code> also has configurable behavior for
extrapolating the <code>outputRange</code>. You can set the extrapolation by setting the <code>extrapolate</code>,
<code>extrapolateLeft</code> or <code>extrapolateRight</code> options. The default value is
<code>extend</code> but you can use <code>clamp</code> to prevent the output value from exceeding
<code>outputRange</code>.</p><h4><a class="anchor" name="tracking-dynamic-values"></a>Tracking Dynamic Values <a class="hash-link" href="docs/animations.html#tracking-dynamic-values">#</a></h4><p>Animated values can also track other values.  Just set the <code>toValue</code> of an
animation to another animated value instead of a plain number. For example, with
spring physics for an interaction like &quot;Chat Heads&quot;, or <code>timing</code> with
<code>duration: 0</code> for rigid/instant tracking.  They can also be composed with
interpolations:</p><div class="prism language-javascript">Animated<span class="token punctuation">.</span><span class="token function">spring<span class="token punctuation">(</span></span>follower<span class="token punctuation">,</span> <span class="token punctuation">{</span>toValue<span class="token punctuation">:</span> leader<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Animated<span class="token punctuation">.</span><span class="token function">timing<span class="token punctuation">(</span></span>opacity<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  toValue<span class="token punctuation">:</span> pan<span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token function">interpolate<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
    inputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    outputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><p><code>ValueXY</code> is a handy way to deal with 2D interactions such as panning or dragging.
It is a simple wrapper that just contains two <code>Animated.Value</code>
instances and some helper functions that call through to them, making <code>ValueXY</code>
a drop-in replacement for <code>Value</code> in many cases.  For example, in the code
snippet above, <code>leader</code> and <code>follower</code> could both be of type <code>ValueXY</code> and the x
and y values track as you would expect.</p><h4><a class="anchor" name="responding-to-the-current-animation-value"></a>Responding to the Current Animation Value <a class="hash-link" href="docs/animations.html#responding-to-the-current-animation-value">#</a></h4><p>You might have noticed there is no obvious way to read the current value while
animating. This is because the value may only be known in the native runtime
due to optimizations.  If you need to run JavaScript in response to the current
value, there are two approaches:</p><ul><li><code>spring.stopAnimation(callback)</code> will stop the animation and invoke <code>callback</code>
with the final value - this is useful when making gesture transitions.</li><li><code>spring.addListener(callback)</code> will invoke <code>callback</code> asynchronously while the
animation is running, providing a recent value.  This is useful for triggering
state changes, for example snapping a bobble to a new option as the user drags
it closer. This is the preferred method for large state changes as they are less
sensitive to a few frames of lag compared to continuous gestures like panning
which need to run at 60fps.</li></ul><h3><a class="anchor" name="requestanimationframe"></a>requestAnimationFrame <a class="hash-link" href="docs/animations.html#requestanimationframe">#</a></h3><p><code>requestAnimationFrame</code> is a polyfill from the browser you might be
familiar with. It accepts a function as its only argument and calls that
function before the next repaint. It is an essential building block for
animations and underlies all of the JavaScript-based animation APIs.  In
general, you shouldn&#x27;t need to call this yourself - the animation APIs will
manage frame updates for you.</p><h4><a class="anchor" name="a-sidenote-about-setnativeprops"></a>A sidenote about setNativeProps <a class="hash-link" href="docs/animations.html#a-sidenote-about-setnativeprops">#</a></h4><p><code>setNativeProps</code> allows us to modify properties of native-backed
components (components that are actually backed by native views, unlike
composite components) directly, without having to <code>setState</code> and
re-render the component hierarchy.</p><p>We could use this in the Rebound example to update the scale. This
might be helpful if the component that we are updating is deeply nested
and hasn&#x27;t been optimized with <code>shouldComponentUpdate</code>.</p><div class="prism language-javascript"><span class="token comment" spellcheck="true">// Back inside of the App component, replace the scrollSpring listener
</span><span class="token comment" spellcheck="true">// in componentWillMount with this:
</span><span class="token keyword">this</span><span class="token punctuation">.</span>_scrollSpring<span class="token punctuation">.</span><span class="token function">addListener<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
  onSpringUpdate<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_photo<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
    <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_scrollSpring<span class="token punctuation">.</span><span class="token function">getCurrentValue<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span>style<span class="token punctuation">:</span> <span class="token punctuation">{</span>transform<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>scaleX<span class="token punctuation">:</span> v<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>scaleY<span class="token punctuation">:</span> v<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_photo<span class="token punctuation">.</span><span class="token function">setNativeProps<span class="token punctuation">(</span></span>newProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// Lastly, we update the render function to no longer pass in the
</span><span class="token comment" spellcheck="true">// transform via style (avoid clashes when re-rendering) and to set the
</span><span class="token comment" spellcheck="true">// photo ref
</span><span class="token function">render<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    &lt;View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      &lt;TouchableWithoutFeedback onPressIn<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressIn<span class="token punctuation">}</span> onPressOut<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>_onPressOut<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        &lt;Image ref<span class="token operator">=</span><span class="token punctuation">{</span>component <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_photo <span class="token operator">=</span> component<span class="token punctuation">}</span>
               source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>uri<span class="token punctuation">:</span> <span class="token string">&quot;img/ReboundExample.png&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
               style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      &lt;<span class="token operator">/</span>TouchableWithoutFeedback<span class="token operator">&gt;</span>
    &lt;<span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></div><p>It would not make sense to use <code>setNativeProps</code> with react-tween-state
because the updated tween values are set on the state automatically by
the library. Rebound, on the other hand, gives us an updated value for
each frame with the <code>onSpringUpdate</code> function.</p><p>If your animations are dropping frames and performing below 60
frames per second, look into using <code>setNativeProps</code> or
<code>shouldComponentUpdate</code> to optimize them.</p><h3><a class="anchor" name="layoutanimation"></a>LayoutAnimation <a class="hash-link" href="docs/animations.html#layoutanimation">#</a></h3><p><code>LayoutAnimation</code> allows you to globally configure <code>create</code> and <code>update</code>
animations used for all views in the next render/layout cycle.
This is useful for doing flexbox layout updates without bothering to measure or
calculate specific properties in order to animate them directly, and is
especially useful when layout changes may affect ancestors.</p><p>A good example is a &quot;see more&quot; expansion that also increases the size of the
parent and pushes down the row below which would otherwise require explicit
coordination between the components in order to animate them all in sync.</p><p>Note that although <code>LayoutAnimation</code> is very powerful and can be quite useful,
it provides much less control than <code>Animated</code> and other animation libraries. If
you can&#x27;t get <code>LayoutAnimation</code> to do what you want, you may need to use another
approach.</p><p>This example uses a preset value. You can customize the animations as
needed. See LayoutAnimation.js for more information.</p></div><div class="docs-prevnext"><a class="docs-prev" href="docs/dev-tools.html#content">← Prev</a><a class="docs-next" href="docs/colors.html#content">Next →</a></div><p class="edit-page-block">You can <a target="_blank" href="https://github.com/facebookincubator/react-vr/blob/master/docs/Animations.md">edit the content above on GitHub</a> and send us a pull request!</p></div></section><footer class="nav-footer"><section class="sitemap"><a href="./index.html" class="nav-home"><img src="img/header_logo.png" alt="React Native" width="66" height="58"></a><div><h5>Docs</h5><a href="docs/getting-started.html">Getting Started</a><a href="docs/tutorial.html">Tutorial</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2016 Facebook Inc.</section></footer></div><div id="fb-root"></div><script src="js/scripts.js"></script></body></html>